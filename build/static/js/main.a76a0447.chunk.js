(this["webpackJsonpchamedia-utlan"]=this["webpackJsonpchamedia-utlan"]||[]).push([[0],{37:function(e,t,n){},39:function(e,t,n){},5:function(e){e.exports=JSON.parse('{"a":"http://172.31.100.69:6969/api"}')},68:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(27),i=n.n(r),l=(n(37),n(9)),s=n(2),o=n(0),j=c.a.createContext(),u=c.a.createContext();function d(){return Object(a.useContext)(j)}function b(){return Object(a.useContext)(u)}function h(e){var t=e.children,n=localStorage.getItem("elevID"),c={navn:localStorage.getItem("elevNavn"),id:n,teacher:localStorage.getItem("teacher"),plassering:localStorage.getItem("plassering"),utlant:localStorage.getItem("utlant")};console.log(c,"start");var r=Object(a.useState)(c),i=Object(s.a)(r,2),d=i[0],b=i[1];return Object(o.jsx)(j.Provider,{value:d,children:Object(o.jsx)(u.Provider,{value:function(e){if(b(e),e.navn){localStorage.setItem("elevID",e._id),localStorage.setItem("elevNavn",e.navn),localStorage.setItem("utlant",JSON.stringify(e.utlant));var t=localStorage.getItem("plassering"),n=localStorage.getItem("teacher");b(Object(l.a)(Object(l.a)({},e),{},{teacher:n,plassering:t}))}else{if(e.teacher){localStorage.setItem("teacher",e.teacher);var a=localStorage.getItem("plassering");return console.log(d),void b(Object(l.a)(Object(l.a)({},e),{},{plassering:a}))}e.plassering&&localStorage.setItem("plassering",e.plassering)}},children:t})})}function O(){var e=d(),t=b();return Object(o.jsxs)("div",{className:"navBar",style:e.navn?{justifyContent:"space-around"}:{justifyContent:"center"},children:[Object(o.jsxs)("h1",{onClick:function(){window.location.href="/"},children:[Object(o.jsx)("span",{id:"blue",children:"cha"}),"media utl\xe5n [Beta]"]}),Object(o.jsxs)("div",{className:"wrap",children:[Object(o.jsx)("h2",{children:e.navn}),e.navn?Object(o.jsx)("button",{onClick:function(){if(e.navn)return localStorage.removeItem("elevID"),localStorage.removeItem("elevNavn"),localStorage.removeItem("utlant"),t(""),void setTimeout((function(){window.location.reload()}),1);window.location.href="/login"},children:"Logg ut"}):""]})]})}n(39);var p=n(31),g=n(3),v=n(16),x=n.n(v),f=n(28),m=n(4),y=n.n(m),w=n(5);function k(){var e=d();return Object(o.jsx)("div",{className:"narrow-card",children:e.navn?Object(o.jsx)(S,{}):Object(o.jsx)(N,{})})}var S=function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Du er allerede logget inn!"}),Object(o.jsx)("button",{onClick:function(){window.location.href="/"},className:"submit-btn",children:Object(o.jsx)("h4",{children:"Send meg til rett plass"})})]})},N=function(){var e=b(),t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],r=n[1],i=function(){var t=Object(f.a)(x.a.mark((function t(){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={type:"get",getType:"user",userID:c},y.a.post(w.a,n).then((function(t){var n=t.data;if(console.log(t,n),n.navn)return e(n),void(window.location.href="/");alert("error")}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h2",{children:"Logg inn elev"}),Object(o.jsx)("input",{type:"password",autoFocus:!0,onKeyUp:function(e){r(e.target.value),"Enter"===e.key&&i()}}),Object(o.jsxs)("div",{className:"wrap-row",children:[Object(o.jsx)("button",{onClick:i,children:Object(o.jsx)("h4",{children:"Logg inn"})}),Object(o.jsx)("button",{onClick:function(){window.location.href="/registrer"},children:Object(o.jsx)("h4",{children:"Registrer"})})]})]})};function I(){var e=d(),t=b();return Object(o.jsxs)("div",{className:"card",children:[Object(o.jsxs)("h1",{children:["Hei ",e.teacher,"!"]}),Object(o.jsxs)("div",{id:"main-menu",children:[Object(o.jsx)("button",{onClick:function(){window.location.href="/login"},className:"shadow",children:Object(o.jsx)("h4",{children:"Utl\xe5n"})}),Object(o.jsx)("button",{onClick:function(){window.location.href="/innlevering"},className:"shadow",children:Object(o.jsx)("h4",{children:"Innlevering"})}),Object(o.jsxs)("a",{href:"/admin",children:[" ",Object(o.jsxs)("button",{className:"shadow",children:[" ",Object(o.jsx)("h4",{children:"Admin"})," "]})," "]}),Object(o.jsx)("button",{onClick:function(){localStorage.removeItem("teacher"),t(""),setTimeout((function(){window.location.reload()}),1)},id:"red-gradient",className:"shadow",children:Object(o.jsx)("h4",{children:"Avslutt"})})]})]})}var C=n(32),U=function(e){return Object(o.jsx)("div",{className:"Sucsess",children:Object(o.jsx)("h2",{children:e.type})})},D=function(e,t){if("usrUpdate"!==e){if("utlanUpdate"===e){var n=Object(l.a)(Object(l.a)({},t),{},{type:e});return console.log("hello world"),void y.a.post(w.a,n).then((function(e){console.log(e)}))}}else{var a=Object(l.a)(Object(l.a)({},t),{},{type:e});y.a.post(w.a,a).then((function(e){window.history.back(),console.log(e)}))}};function T(){var e=d(),t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),l=Object(s.a)(i,2),j=l[0],u=l[1];Object(a.useEffect)((function(){var t=JSON.parse(e.utlant);r(t)}),[e]);var b=function(e){console.log(e);var t={type:"get",getType:"laanut",_id:e};y.a.post(w.a,t).then((function(t){if(console.log(t),"Det du skannet er ikke registrert!"===t.data||"allerede l\xe5nt ut!"===t.data)return alert(t.data),void(e="");var n=t.data[0],a=[].concat(Object(C.a)(c),[{id:c.length,name:n.item,bCode:n.barcode,info:n.info,plassering:n.plassering}]);r(a),D("utlanUpdate",{_id:localStorage.getItem("elevID"),utlant:a,elevNavn:localStorage.getItem("elevNavn")}),e="",u(!0),setTimeout((function(){u(!1)}),3e3)}))},h=c.map((function(e){return Object(o.jsxs)("div",{className:"listItem",children:[Object(o.jsx)("p",{children:e.name}),Object(o.jsx)("p",{children:e.info}),Object(o.jsxs)("p",{children:[" ",e.bCode," "]}),Object(o.jsxs)("p",{children:[" ",e.plassering," "]})]},e.id)}));return Object(o.jsxs)("div",{className:"card",children:[j?Object(o.jsx)(U,{type:"Sucsess"}):"",Object(o.jsx)("h2",{children:"Utl\xe5n"}),Object(o.jsx)("input",{type:"text",onInput:function(e){/\d+ZX$/.test(e.target.value)&&(b(e.target.value),setTimeout((function(){e.target.value=""}),100))},className:"wideInput",autoFocus:!0}),Object(o.jsx)("div",{className:"list",children:Object(o.jsx)("ul",{children:h})})]})}var F=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(s.a)(r,2),l=i[0],j=i[1],u=Object(a.useState)(""),d=Object(s.a)(u,2),b=d[0],h=d[1];return Object(o.jsxs)("div",{className:"narrow-card",children:[Object(o.jsx)("h1",{children:"Registrering"}),Object(o.jsx)("input",{onKeyUp:function(e){c(e.target.value)},type:"text",placeholder:"elevID (ikke feide inlogging)"}),Object(o.jsx)("input",{onKeyUp:function(e){j(e.target.value)},type:"text",placeholder:"Fornavn"}),Object(o.jsx)("input",{onKeyUp:function(e){h(e.target.value)},type:"text",placeholder:"E-post"}),Object(o.jsx)("button",{onClick:function(){n&&l&&b?D("usrUpdate",{_id:n,navn:l,epost:b,teacher:!1}):alert("Du mangler noe!")},className:"submit-btn",children:"Registrer"})]})},K=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],r=d(),i=Object(a.useState)(""),l=Object(s.a)(i,2),j=l[0],u=l[1],b=Object(a.useState)(""),h=Object(s.a)(b,2),O=h[0],p=h[1],g=Object(a.useState)(""),v=Object(s.a)(g,2),x=v[0],f=v[1],m=function(e){e.target.value=""};return Object(o.jsxs)("div",{className:"card",children:[n?Object(o.jsx)(U,{type:"Registrert!"}):"",Object(o.jsx)("input",{onClick:m,onKeyUp:function(e){u(e.target.value)},onFocus:function(e){e.target.value=""},type:"text",id:"bCodeInput",placeholder:"barcode"}),Object(o.jsx)("input",{onClick:m,onKeyUp:function(e){p(e.target.value)},type:"text",placeholder:"ID (f.eks: K10)"}),Object(o.jsx)("input",{onClick:m,onKeyUp:function(e){f(e.target.value)},type:"text",placeholder:"tilbeh\xf8r/innhold (batteri, xlr kabel...)"}),Object(o.jsxs)("div",{className:"wrapRow",children:[Object(o.jsx)("button",{onClick:function(){var e={type:"utstyrRegistrering",_id:j,barcode:j,item:O,plassering:r.plassering,info:x};j&&O&&x?y.a.post(w.a,e).then((function(e){"sendt to db"===e.data&&(console.log("yeyy"),c(!0),document.querySelector("#bCodeInput").focus(),setTimeout((function(){c(!1)}),3e3))})):alert("Du m\xe5 fylle inn alle feltene!")},children:"Lagre"}),Object(o.jsx)("button",{onClick:function(){window.location.href="/admin"},id:"red-gradient",children:"Tilbake"})]})]})},L=function(){return Object(o.jsxs)("div",{className:"card",children:[Object(o.jsx)("button",{className:"shadow",onClick:function(){window.location.href="/admin/regutstyr"},children:"Registrer utstyr"}),Object(o.jsx)("button",{className:"shadow",onClick:function(){window.location.href="/admin/nylaerer"},children:"Registrer L\xe6rer"}),Object(o.jsx)("button",{className:"shadow",onClick:function(){window.location.href="/admin/inventory"},children:"Overiskt"}),Object(o.jsx)("button",{className:"shadow",onClick:function(){window.location.href="/"},id:"red-gradient",children:"G\xe5 ut"})]})},_=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(s.a)(r,2),l=i[0],j=i[1],u=Object(a.useState)(""),d=Object(s.a)(u,2),b=d[0],h=d[1];return Object(o.jsxs)("div",{className:"narrow-card",children:[Object(o.jsx)("h1",{children:"L\xe6rer registrering"}),Object(o.jsx)("input",{onKeyUp:function(e){c(e.target.value)},autoFocus:!0,type:"text",placeholder:"Scan ditt kort her"}),Object(o.jsx)("input",{onKeyUp:function(e){j(e.target.value)},type:"text",placeholder:"Fornavn"}),Object(o.jsx)("input",{onKeyUp:function(e){h(e.target.value)},type:"text",placeholder:"E-post"}),Object(o.jsx)("button",{onClick:function(){n&&l&&b?D("usrUpdate",{_id:n,navn:l,epost:b,teacher:!0}):alert("Du mangler noe!")},className:"submit-btn",children:"Registrer"})]})},R=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(o.jsxs)("div",{className:"card",children:[Object(o.jsx)("h1",{children:"Innlevering"}),n?Object(o.jsx)(U,{type:"Innlevert"}):"",Object(o.jsx)("input",{autoFocus:!0,onKeyUp:function(e){if(/\d+ZX$/.test(e.target.value)){var t={type:"get",getType:"utlaan",_id:e.target.value};y.a.post(w.a,t).then((function(t){if("not found"===t.data)return e.target.value="",void alert("Ikke utlevert!");var n=t.data[0],a={type:"get",getType:"user",userID:n.user};y.a.post(w.a,a).then((function(e){var t={type:"rmUtlan",nyUtlant:e.data.utlant.filter((function(e){return e.bCode!==n._id})),bCode:n._id,userID:n.user};y.a.post(w.a,t),c(!0),setTimeout((function(){c(!1)}),2500)})),e.target.value=""}))}},type:"text"}),Object(o.jsx)("button",{id:"red-gradient",onClick:function(){window.history.back()},children:"Tilbake"})]})},E=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),i=Object(s.a)(r,2),l=i[0],j=i[1],u=Object(a.useState)([]),d=Object(s.a)(u,2),b=d[0],h=d[1],O=Object(a.useState)([]),p=Object(s.a)(O,2),g=p[0],v=p[1],x=Object(a.useState)("allUtstyr"),f=Object(s.a)(x,2),m=f[0],k=f[1];Object(a.useEffect)((function(){S()}),[]);var S=function(){y.a.post(w.a,{type:"get",getType:"allUtstyr"}).then((function(e){console.log(e.data),j(e.data),c(e.data);var t=e.data.filter((function(e){return!0===e.utlant.status}));h(t);var n=e.data.filter((function(e){return!1===e.utlant.status}));v(n)}))},N=n.map((function(e){return Object(o.jsxs)("div",{className:"listItem",id:e.utlant.status?"green":"",children:[Object(o.jsx)("p",{children:e.item}),Object(o.jsx)("p",{children:e.info}),Object(o.jsx)("p",{children:e.plassering}),Object(o.jsxs)("p",{children:[" ",e.barcode," "]}),Object(o.jsxs)("p",{children:[" ",e.utlant.utlaner," "]})]},e._id)})),I=function(e){if("All"===e.target.value)return"allUtstyr"===m&&c(l),"allUtlant"===m&&c(b),void("notUtlant"===m&&c(g));if("allUtstyr"===m){var t=l.filter((function(t){return t.plassering===e.target.value}));c(t)}if("allUtlant"===m){var n=b.filter((function(t){return t.plassering===e.target.value}));c(n)}if("notUtlant"===m){var a=g.filter((function(t){return t.plassering===e.target.value}));c(a)}};return Object(o.jsxs)("div",{className:"bigCard",children:[Object(o.jsxs)("div",{className:"topControl",children:[Object(o.jsx)("h2",{children:"Utstyr oversikt"}),Object(o.jsxs)("div",{className:"filters",children:[Object(o.jsxs)("div",{className:"wrap",children:[Object(o.jsx)("h3",{children:"Status:"}),Object(o.jsxs)("select",{children:[Object(o.jsx)("option",{onClick:function(){k("allUtstyr"),c(l)},value:"AltUtstyr",children:"Ingen filter"}),Object(o.jsx)("option",{onClick:function(){k("allUtlant"),c(b)},value:"Utlant",children:"Utl\xe5nt"}),Object(o.jsx)("option",{onClick:function(){k("notUtlant"),c(g)},value:"NotUtlant",children:"Ikke utl\xe5nt"})]})]}),Object(o.jsxs)("div",{className:"wrap",children:[Object(o.jsx)("h3",{children:"Plassering:"}),Object(o.jsxs)("select",{children:[Object(o.jsx)("option",{onClick:I,value:"All",children:"Ingen filter"}),Object(o.jsx)("option",{onClick:I,value:"kameralager",children:"Kameralager"}),Object(o.jsx)("option",{onClick:I,value:"Utstyrlager",children:"Utstyrlager"}),Object(o.jsx)("option",{onClick:I,value:"IM lager",children:"IM lager"})]})]}),Object(o.jsx)("div",{className:"wrap",children:Object(o.jsx)("button",{className:"shadow",onClick:function(){window.history.back()},id:"red-gradient",children:"Tilbake"})})]})]}),Object(o.jsxs)("div",{className:"top",children:[Object(o.jsx)("p",{children:"Item"}),Object(o.jsx)("p",{children:"Info"}),Object(o.jsx)("p",{children:"Plassering"}),Object(o.jsx)("p",{children:"Barocde"}),Object(o.jsx)("p",{children:"Utl\xe5ner"})]}),Object(o.jsx)("div",{className:"list",children:N})]})},P=function(){var e=d();return Object(o.jsxs)(p.a,{children:[e.navn?Object(o.jsx)(g.a,{path:"/",exact:!0,component:T}):Object(o.jsx)(g.a,{path:"/",exact:!0,component:I}),Object(o.jsx)(g.a,{path:"/login",component:k}),Object(o.jsx)(g.a,{path:"/registrer",component:F}),Object(o.jsx)(g.a,{path:"/innlevering",component:R}),Object(o.jsx)(g.a,{path:"/admin",exact:!0,component:L}),Object(o.jsx)(g.a,{path:"/admin/regutstyr",component:K}),Object(o.jsx)(g.a,{path:"/admin/nylaerer",component:_}),Object(o.jsx)(g.a,{path:"/admin/inventory",component:E})]})},A=function(){var e=b(),t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],r=n[1],i=function(){var t={type:"get",getType:"user",userID:c};y.a.post(w.a,t).then((function(t){var n=t.data;if(console.log(t,n),n.teacher)return e({teacher:n.navn}),void(window.location.href="/");alert("Fant deg ikke som en l\xe6rer")}))};return Object(o.jsxs)("div",{className:"narrow-card",children:[Object(o.jsx)("h2",{children:"Scan ditt kort"}),Object(o.jsx)("input",{type:"password",onKeyUp:function(e){r(e.target.value),"Enter"===e.key&&i()},placeholder:"Scan kortet ditt",autoFocus:!0}),Object(o.jsx)("button",{onClick:i,className:"submit-btn",children:"Logg inn"})]})},B=function(){var e=Object(a.useState)("velg"),t=Object(s.a)(e,2),n=t[0],c=t[1],r=b();return Object(o.jsxs)("div",{className:"narrow-card",id:"plassering",children:[Object(o.jsx)("h2",{children:"Hvor er denne maskinen?"}),Object(o.jsxs)("select",{name:"plassering",onClick:function(e){c(e.target.value),console.log(e.target.value)},children:[Object(o.jsx)("option",{value:"velg",children:"Velg"}),Object(o.jsx)("option",{value:"kameralager",children:"kameralager"}),Object(o.jsx)("option",{value:"utstyrlager",children:"utstyrlager"}),Object(o.jsx)("option",{value:"IM lager",children:"IM lager"})]}),Object(o.jsx)("button",{onClick:function(){"velg"===n?alert("Du m\xe5 velge en plass!"):r({plassering:n})},className:"innlevering",children:"Lagre"})]})};var J=function(){var e=d();return Object(o.jsxs)("div",{className:"app",children:[Object(o.jsx)(O,{}),e.plassering?"":Object(o.jsx)(B,{}),e.teacher?Object(o.jsx)(P,{}):Object(o.jsx)(A,{})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(h,{children:Object(o.jsx)(J,{})})}),document.getElementById("root")),M()}},[[68,1,2]]]);
//# sourceMappingURL=main.a76a0447.chunk.js.map