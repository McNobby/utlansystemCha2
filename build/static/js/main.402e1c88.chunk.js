(this["webpackJsonpchamedia-utlan"]=this["webpackJsonpchamedia-utlan"]||[]).push([[0],{36:function(e,t,n){},38:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(26),i=n.n(r),l=(n(36),n(8)),o=n(2),s=n(0),j=c.a.createContext(),u=c.a.createContext();function d(){return Object(a.useContext)(j)}function b(){return Object(a.useContext)(u)}function h(e){var t=e.children,n=localStorage.getItem("elevID"),c={navn:localStorage.getItem("elevNavn"),id:n,teacher:localStorage.getItem("teacher"),plassering:localStorage.getItem("plassering"),utlant:localStorage.getItem("utlant")};console.log(c,"start");var r=Object(a.useState)(c),i=Object(o.a)(r,2),d=i[0],b=i[1];return Object(s.jsx)(j.Provider,{value:d,children:Object(s.jsx)(u.Provider,{value:function(e){if(b(e),e.navn){localStorage.setItem("elevID",e._id),localStorage.setItem("elevNavn",e.navn),localStorage.setItem("utlant",JSON.stringify(e.utlant));var t=localStorage.getItem("plassering"),n=localStorage.getItem("teacher");b(Object(l.a)(Object(l.a)({},e),{},{teacher:n,plassering:t}))}else{if(e.teacher){localStorage.setItem("teacher",e.teacher);var a=localStorage.getItem("plassering");return console.log(d),void b(Object(l.a)(Object(l.a)({},e),{},{plassering:a}))}e.plassering&&localStorage.setItem("plassering",e.plassering)}},children:t})})}function p(){var e=d(),t=b();return Object(s.jsxs)("div",{className:"navBar",style:e.navn?{justifyContent:"space-around"}:{justifyContent:"center"},children:[Object(s.jsxs)("h1",{onClick:function(){window.location.href="/"},children:[Object(s.jsx)("span",{id:"blue",children:"cha"}),"media utl\xe5n [Beta]"]}),Object(s.jsxs)("div",{className:"wrap",children:[Object(s.jsx)("h2",{children:e.navn}),e.navn?Object(s.jsx)("button",{onClick:function(){if(e.navn)return localStorage.removeItem("elevID"),localStorage.removeItem("elevNavn"),localStorage.removeItem("utlant"),t(""),void setTimeout((function(){window.location.reload()}),1);window.location.href="/login"},children:"Logg ut"}):""]})]})}n(38);var O=n(30),g=n(3),v=n(15),x=n.n(v),f=n(27),m=n(4),y=n.n(m);function w(){var e=d();return Object(s.jsx)("div",{className:"narrow-card",children:e.navn?Object(s.jsx)(k,{}):Object(s.jsx)(S,{})})}var k=function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Du er allerede logget inn!"}),Object(s.jsx)("button",{onClick:function(){window.location.href="/"},className:"submit-btn",children:Object(s.jsx)("h4",{children:"Send meg til rett plass"})})]})},S=function(){var e=b(),t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],r=n[1],i=function(){var t=Object(f.a)(x.a.mark((function t(){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={type:"get",getType:"user",userID:c},y.a.post("http://127.0.0.1:6969/api",n).then((function(t){var n=t.data;if(console.log(t,n),n.navn)return e(n),void(window.location.href="/");alert("error")}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Logg inn elev"}),Object(s.jsx)("input",{type:"password",autoFocus:!0,onKeyUp:function(e){r(e.target.value),"Enter"===e.key&&i()}}),Object(s.jsxs)("div",{className:"wrap-row",children:[Object(s.jsx)("button",{onClick:i,children:Object(s.jsx)("h4",{children:"Logg inn"})}),Object(s.jsx)("button",{onClick:function(){window.location.href="/registrer"},children:Object(s.jsx)("h4",{children:"Registrer"})})]})]})};function I(){var e=d(),t=b();return Object(s.jsxs)("div",{className:"card",children:[Object(s.jsxs)("h1",{children:["Hei ",e.teacher,"!"]}),Object(s.jsxs)("div",{id:"main-menu",children:[Object(s.jsx)("button",{onClick:function(){window.location.href="/login"},className:"shadow",children:Object(s.jsx)("h4",{children:"Utl\xe5n"})}),Object(s.jsx)("button",{onClick:function(){window.location.href="/innlevering"},className:"shadow",children:Object(s.jsx)("h4",{children:"Innlevering"})}),Object(s.jsx)("button",{onClick:function(){localStorage.removeItem("teacher"),t(""),setTimeout((function(){window.location.reload()}),1)},id:"red-gradient",className:"shadow",children:Object(s.jsx)("h4",{children:"Avslutt"})})]})]})}var C=n(31),N=function(e){return Object(s.jsx)("div",{className:"Sucsess",children:Object(s.jsx)("h2",{children:e.type})})},U=function(e,t){if("usrUpdate"!==e){if("utlanUpdate"===e){var n=Object(l.a)(Object(l.a)({},t),{},{type:e});return console.log("hello world"),void y.a.post("http://127.0.0.1:6969/api",n).then((function(e){console.log(e)}))}}else{var a=Object(l.a)(Object(l.a)({},t),{},{type:e});y.a.post("http://127.0.0.1:6969/api",a).then((function(e){window.history.back(),console.log(e)}))}};function D(){var e=d(),t=Object(a.useState)([]),n=Object(o.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),l=Object(o.a)(i,2),j=l[0],u=l[1];Object(a.useEffect)((function(){var t=JSON.parse(e.utlant);r(t)}),[e]);var b=function(e){console.log(e);var t={type:"get",getType:"laanut",_id:e};y.a.post("http://127.0.0.1:6969/api",t).then((function(t){if(console.log(t),"Det du skannet er ikke registrert!"===t.data||"allerede l\xe5nt ut!"===t.data)return alert(t.data),void(e="");var n=t.data[0],a=[].concat(Object(C.a)(c),[{id:c.length,name:n.item,bCode:n.barcode,info:n.info}]);r(a),U("utlanUpdate",{_id:localStorage.getItem("elevID"),utlant:a,elevNavn:localStorage.getItem("elevNavn")}),e="",u(!0),setTimeout((function(){u(!1)}),3e3)}))},h=c.map((function(e){return Object(s.jsxs)("li",{children:[e.name,", ",e.info," ",Object(s.jsx)("span",{children:e.bCode})]},e.id)}));return Object(s.jsxs)("div",{className:"card",children:[j?Object(s.jsx)(N,{type:"Sucsess"}):"",Object(s.jsx)("h2",{children:"Utl\xe5n"}),Object(s.jsx)("input",{type:"text",onInput:function(e){/\d+ZX$/.test(e.target.value)&&(b(e.target.value),setTimeout((function(){e.target.value=""}),100))},className:"wideInput",autoFocus:!0}),Object(s.jsx)("div",{className:"list",children:Object(s.jsx)("ul",{children:h})})]})}var T=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(o.a)(r,2),l=i[0],j=i[1],u=Object(a.useState)(""),d=Object(o.a)(u,2),b=d[0],h=d[1];return Object(s.jsxs)("div",{className:"narrow-card",children:[Object(s.jsx)("h1",{children:"Registrering"}),Object(s.jsx)("input",{onKeyUp:function(e){c(e.target.value)},type:"text",placeholder:"elevID (ikke feide inlogging)"}),Object(s.jsx)("input",{onKeyUp:function(e){j(e.target.value)},type:"text",placeholder:"Fornavn"}),Object(s.jsx)("input",{onKeyUp:function(e){h(e.target.value)},type:"text",placeholder:"E-post"}),Object(s.jsx)("button",{onClick:function(){n&&l&&b?U("usrUpdate",{_id:n,navn:l,epost:b,teacher:!1}):alert("Du mangler noe!")},className:"submit-btn",children:"Registrer"})]})},K=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],r=d(),i=Object(a.useState)(""),l=Object(o.a)(i,2),j=l[0],u=l[1],b=Object(a.useState)(""),h=Object(o.a)(b,2),p=h[0],O=h[1],g=Object(a.useState)(""),v=Object(o.a)(g,2),x=v[0],f=v[1],m=function(e){e.target.value=""};return Object(s.jsxs)("div",{className:"card",children:[n?Object(s.jsx)(N,{type:"Registrert!"}):"",Object(s.jsx)("input",{onClick:m,onKeyUp:function(e){u(e.target.value)},type:"text",id:"bCodeInput",placeholder:"barcode"}),Object(s.jsx)("input",{onClick:m,onKeyUp:function(e){O(e.target.value)},type:"text",placeholder:"ID (f.eks: K10)"}),Object(s.jsx)("input",{onClick:m,onKeyUp:function(e){f(e.target.value)},type:"text",placeholder:"tilbeh\xf8r/innhold (batteri, xlr kabel...)"}),Object(s.jsxs)("div",{className:"wrapRow",children:[Object(s.jsx)("button",{onClick:function(){var e={type:"utstyrRegistrering",_id:j,barcode:j,item:p,plassering:r.plassering,info:x};j&&p&&x?y.a.post("http://localhost:6969/api",e).then((function(e){"sendt to db"===e.data&&(console.log("yeyy"),c(!0),document.querySelector("#bCodeInput").focus(),setTimeout((function(){c(!1)}),3e3))})):alert("Du m\xe5 fylle inn alle feltene!")},children:"Lagre"}),Object(s.jsx)("button",{onClick:function(){window.location.href="/admin"},id:"red-gradient",children:"Tilbake"})]})]})},F=function(){return Object(s.jsxs)("div",{className:"card",children:[Object(s.jsx)("button",{className:"shadow",onClick:function(){window.location.href="/admin/regutstyr"},children:"Registrer utstyr"}),Object(s.jsx)("button",{className:"shadow",onClick:function(){window.location.href="/admin/nylaerer"},children:"Registrer L\xe6rer"}),Object(s.jsx)("button",{className:"shadow",onClick:function(){window.location.href="/admin/inventory"},children:"Overiskt"}),Object(s.jsx)("button",{className:"shadow",onClick:function(){window.location.href="/"},id:"red-gradient",children:"G\xe5 ut"})]})},L=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(o.a)(r,2),l=i[0],j=i[1],u=Object(a.useState)(""),d=Object(o.a)(u,2),b=d[0],h=d[1];return Object(s.jsxs)("div",{className:"narrow-card",children:[Object(s.jsx)("h1",{children:"L\xe6rer registrering"}),Object(s.jsx)("input",{onKeyUp:function(e){c(e.target.value)},autoFocus:!0,type:"text",placeholder:"Scan ditt kort her"}),Object(s.jsx)("input",{onKeyUp:function(e){j(e.target.value)},type:"text",placeholder:"Fornavn"}),Object(s.jsx)("input",{onKeyUp:function(e){h(e.target.value)},type:"text",placeholder:"E-post"}),Object(s.jsx)("button",{onClick:function(){n&&l&&b?U("usrUpdate",{_id:n,navn:l,epost:b,teacher:!0}):alert("Du mangler noe!")},className:"submit-btn",children:"Registrer"})]})},_=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(s.jsxs)("div",{className:"card",children:[Object(s.jsx)("h1",{children:"Innlevering"}),n?Object(s.jsx)(N,{type:"Innlevert"}):"",Object(s.jsx)("input",{autoFocus:!0,onKeyUp:function(e){if(/\d+ZX$/.test(e.target.value)){var t={type:"get",getType:"utlaan",_id:e.target.value};y.a.post("http://localhost:6969/api",t).then((function(t){if("not found"===t.data)return e.target.value="",void alert("Ikke utlevert!");var n=t.data[0],a={type:"get",getType:"user",userID:n.user};y.a.post("http://localhost:6969/api",a).then((function(e){var t={type:"rmUtlan",nyUtlant:e.data.utlant.filter((function(e){return e.bCode!==n._id})),bCode:n._id,userID:n.user};y.a.post("http://localhost:6969/api",t),c(!0),setTimeout((function(){c(!1)}),2500)})),e.target.value=""}))}},type:"text"}),Object(s.jsx)("button",{id:"red-gradient",onClick:function(){window.history.back()},children:"Tilbake"})]})},R=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),i=Object(o.a)(r,2),l=i[0],j=i[1],u=Object(a.useState)([]),d=Object(o.a)(u,2),b=d[0],h=d[1],p=Object(a.useState)([]),O=Object(o.a)(p,2),g=O[0],v=O[1],x=Object(a.useState)("allUtstyr"),f=Object(o.a)(x,2),m=f[0],w=f[1];Object(a.useEffect)((function(){k()}),[]);var k=function(){y.a.post("http://localhost:6969/api",{type:"get",getType:"allUtstyr"}).then((function(e){console.log(e.data),j(e.data),c(e.data);var t=e.data.filter((function(e){return!0===e.utlant.status}));h(t);var n=e.data.filter((function(e){return!1===e.utlant.status}));v(n)}))},S=n.map((function(e){return Object(s.jsxs)("div",{className:"listItem",id:e.utlant.status?"green":"",children:[Object(s.jsx)("p",{children:e.item}),Object(s.jsx)("p",{children:e.info}),Object(s.jsx)("p",{children:e.plassering}),Object(s.jsxs)("p",{children:[" ",e.barcode," "]}),Object(s.jsxs)("p",{children:[" ",e.utlant.utlaner," "]})]},e._id)})),I=function(e){if("All"===e.target.value)return"allUtstyr"===m&&c(l),"allUtlant"===m&&c(b),void("notUtlant"===m&&c(g));if("allUtstyr"===m){var t=l.filter((function(t){return t.plassering===e.target.value}));c(t)}if("allUtlant"===m){var n=b.filter((function(t){return t.plassering===e.target.value}));c(n)}if("notUtlant"===m){var a=g.filter((function(t){return t.plassering===e.target.value}));c(a)}};return Object(s.jsxs)("div",{className:"bigCard",children:[Object(s.jsxs)("div",{className:"topControl",children:[Object(s.jsx)("h2",{children:"Utstyr oversikt"}),Object(s.jsxs)("div",{className:"filters",children:[Object(s.jsxs)("div",{className:"wrap",children:[Object(s.jsx)("h3",{children:"Status:"}),Object(s.jsxs)("select",{children:[Object(s.jsx)("option",{onClick:function(){w("allUtstyr"),c(l)},value:"AltUtstyr",children:"Ingen filter"}),Object(s.jsx)("option",{onClick:function(){w("allUtlant"),c(b)},value:"Utlant",children:"Utl\xe5nt"}),Object(s.jsx)("option",{onClick:function(){w("notUtlant"),c(g)},value:"NotUtlant",children:"Ikke utl\xe5nt"})]})]}),Object(s.jsxs)("div",{className:"wrap",children:[Object(s.jsx)("h3",{children:"Plassering:"}),Object(s.jsxs)("select",{children:[Object(s.jsx)("option",{onClick:I,value:"All",children:"Ingen filter"}),Object(s.jsx)("option",{onClick:I,value:"kameralager",children:"Kameralager"}),Object(s.jsx)("option",{onClick:I,value:"Utstyrlager",children:"Utstyrlager"}),Object(s.jsx)("option",{onClick:I,value:"IM lager",children:"IM lager"})]})]}),Object(s.jsx)("div",{className:"wrap",children:Object(s.jsx)("button",{className:"shadow",onClick:function(){window.history.back()},id:"red-gradient",children:"Tilbake"})})]})]}),Object(s.jsxs)("div",{className:"top",children:[Object(s.jsx)("p",{children:"Item"}),Object(s.jsx)("p",{children:"Info"}),Object(s.jsx)("p",{children:"Plassering"}),Object(s.jsx)("p",{children:"Barocde"}),Object(s.jsx)("p",{children:"Utl\xe5ner"})]}),Object(s.jsx)("div",{className:"list",children:S})]})},E=function(){var e=d();return Object(s.jsxs)(O.a,{children:[e.navn?Object(s.jsx)(g.a,{path:"/",exact:!0,component:D}):Object(s.jsx)(g.a,{path:"/",exact:!0,component:I}),Object(s.jsx)(g.a,{path:"/login",component:w}),Object(s.jsx)(g.a,{path:"/registrer",component:T}),Object(s.jsx)(g.a,{path:"/innlevering",component:_}),Object(s.jsx)(g.a,{path:"/admin",exact:!0,component:F}),Object(s.jsx)(g.a,{path:"/admin/regutstyr",component:K}),Object(s.jsx)(g.a,{path:"/admin/nylaerer",component:L}),Object(s.jsx)(g.a,{path:"/admin/inventory",component:R})]})},P=function(){var e=b(),t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],r=n[1],i=function(){var t={type:"get",getType:"user",userID:c};y.a.post("http://127.0.0.1:6969/api",t).then((function(t){var n=t.data;if(console.log(t,n),n.teacher)return e({teacher:n.navn}),void(window.location.href="/");alert("Fant deg ikke som en l\xe6rer")}))};return Object(s.jsxs)("div",{className:"narrow-card",children:[Object(s.jsx)("h2",{children:"Scan ditt kort"}),Object(s.jsx)("input",{type:"password",onKeyUp:function(e){r(e.target.value),"Enter"===e.key&&i()},placeholder:"Scan kortet ditt",autoFocus:!0}),Object(s.jsx)("button",{onClick:i,className:"submit-btn",children:"Logg inn"})]})},B=function(){var e=Object(a.useState)("velg"),t=Object(o.a)(e,2),n=t[0],c=t[1],r=b();return Object(s.jsxs)("div",{className:"narrow-card",id:"plassering",children:[Object(s.jsx)("h2",{children:"Hvor er denne maskinen?"}),Object(s.jsxs)("select",{name:"plassering",onClick:function(e){c(e.target.value),console.log(e.target.value)},children:[Object(s.jsx)("option",{value:"velg",children:"Velg"}),Object(s.jsx)("option",{value:"kameralager",children:"kameralager"}),Object(s.jsx)("option",{value:"utstyrlager",children:"utstyrlager"}),Object(s.jsx)("option",{value:"IM lager",children:"IM lager"})]}),Object(s.jsx)("button",{onClick:function(){"velg"===n?alert("Du m\xe5 velge en plass!"):r({plassering:n})},className:"innlevering",children:"Lagre"})]})};var M=function(){var e=d();return Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)(p,{}),e.plassering?"":Object(s.jsx)(B,{}),e.teacher?Object(s.jsx)(E,{}):Object(s.jsx)(P,{})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(h,{children:Object(s.jsx)(M,{})})}),document.getElementById("root")),A()}},[[67,1,2]]]);
//# sourceMappingURL=main.402e1c88.chunk.js.map