{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/teodo/Documents/GitHub/utlansystemCha2/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/teodo/Documents/GitHub/utlansystemCha2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/teodo/Documents/GitHub/utlansystemCha2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useUpdateLogin,useLogin}from'../loginContext';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function LoginCard(){var isLoggedIn=useLogin();return/*#__PURE__*/_jsx(\"div\",{className:\"narrow-card\",children:isLoggedIn.navn?/*#__PURE__*/_jsx(LoggedIn,{}):/*#__PURE__*/_jsx(LoginForm,{})});}var LoggedIn=function LoggedIn(){var handleClick=function handleClick(){window.location.href=\"/\";};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Du er allerede logget inn!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,className:\"submit-btn\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Send meg til rett plass\"})})]});};var LoginForm=function LoginForm(){var updateLogin=useUpdateLogin();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var handleClick=function handleClick(e){setInput(e.target.value);if(e.key==='Enter'){handleSubmit();}};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var req;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:req={type:'get',getType:'user',userID:input};axios.post('http://127.0.0.1:6969/api',req).then(function(res){var user=res.data;console.log(res,user);if(user.navn){updateLogin(user);window.location.href=\"/\";return;}alert('error');});case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();var regButtonClick=function regButtonClick(){window.location.href=\"/registrer\";};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Logg inn elev\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",autoFocus:true,onKeyUp:handleClick}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrap-row\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:/*#__PURE__*/_jsx(\"h4\",{children:\"Logg inn\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:regButtonClick,children:/*#__PURE__*/_jsx(\"h4\",{children:\"Registrer\"})})]})]});};","map":{"version":3,"sources":["C:/Users/teodo/Documents/GitHub/utlansystemCha2/src/Components/loginCard.js"],"names":["React","useState","useUpdateLogin","useLogin","axios","LoginCard","isLoggedIn","navn","LoggedIn","handleClick","window","location","href","LoginForm","updateLogin","input","setInput","e","target","value","key","handleSubmit","req","type","getType","userID","post","then","res","user","data","console","log","alert","regButtonClick"],"mappings":"mYAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,OAASC,cAAT,CAAyBC,QAAzB,KAAyC,iBAAzC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAEA,cAAe,SAASC,CAAAA,SAAT,EAAqB,CAEhC,GAAMC,CAAAA,UAAU,CAAGH,QAAQ,EAA3B,CAEA,mBACI,YAAK,SAAS,CAAC,aAAf,UACKG,UAAU,CAACC,IAAX,cAAkB,KAAC,QAAD,IAAlB,cAAiC,KAAC,SAAD,IADtC,EADJ,CAKH,CAED,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnB,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAK,CACrBC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAAvB,CACH,CAFD,CAGA,mBACI,oCACI,kDADJ,cAEI,eAAQ,OAAO,CAAEH,WAAjB,CAA8B,SAAS,CAAC,YAAxC,uBAAqD,+CAArD,EAFJ,GADJ,CAOH,CAXD,CAaA,GAAMI,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAEpB,GAAMC,CAAAA,WAAW,CAAGZ,cAAc,EAAlC,CAEA,cAA0BD,QAAQ,CAAC,EAAD,CAAlC,wCAAOc,KAAP,eAAcC,QAAd,eAEA,GAAMP,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACQ,CAAD,CAAM,CACtBD,QAAQ,CAACC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR,CAEA,GAAIF,CAAC,CAACG,GAAF,GAAU,OAAd,CAAsB,CAClBC,YAAY,GACf,CACJ,CAND,CAQA,GAAMA,CAAAA,YAAY,0FAAG,2IAGXC,GAHW,CAGL,CACRC,IAAI,CAAE,KADE,CAERC,OAAO,CAAE,MAFD,CAGRC,MAAM,CAAEV,KAHA,CAHK,CAQjBX,KAAK,CAACsB,IAAN,CAAW,2BAAX,CAAwCJ,GAAxC,EACCK,IADD,CACM,SAACC,GAAD,CAAO,CACT,GAAMC,CAAAA,IAAI,CAAGD,GAAG,CAACE,IAAjB,CACAC,OAAO,CAACC,GAAR,CAAYJ,GAAZ,CAAiBC,IAAjB,EACA,GAAGA,IAAI,CAACtB,IAAR,CAAa,CACTO,WAAW,CAACe,IAAD,CAAX,CACAnB,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAAvB,CACA,OACH,CACDqB,KAAK,CAAC,OAAD,CAAL,CACH,CAVD,EARiB,sDAAH,kBAAZZ,CAAAA,YAAY,0CAAlB,CAsBA,GAAMa,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAK,CACxBxB,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,YAArB,CACH,CAFD,CAIA,mBAEI,wCACI,qCADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAsB,SAAS,KAA/B,CAAgC,OAAO,CAAEH,WAAzC,EAFJ,cAII,aAAK,SAAS,CAAC,UAAf,wBACA,eAAQ,OAAO,CAAEY,YAAjB,uBAA+B,gCAA/B,EADA,cAEA,eAAQ,OAAO,CAAEa,cAAjB,uBAAkC,iCAAlC,EAFA,GAJJ,GAFJ,CAeH,CAvDD","sourcesContent":["import React, {useState} from 'react'\r\nimport { useUpdateLogin, useLogin } from '../loginContext'\r\nimport axios from 'axios'\r\n\r\nexport default function LoginCard() {\r\n\r\n    const isLoggedIn = useLogin()\r\n\r\n    return(\r\n        <div className=\"narrow-card\">\r\n            {isLoggedIn.navn ? <LoggedIn /> : <LoginForm />}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst LoggedIn = () => {\r\n    const handleClick = () =>{\r\n        window.location.href = \"/\"\r\n    }\r\n    return(\r\n        <div>\r\n            <h2>Du er allerede logget inn!</h2>\r\n            <button onClick={handleClick} className=\"submit-btn\"><h4>Send meg til rett plass</h4></button>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nconst LoginForm = () => {\r\n\r\n    const updateLogin = useUpdateLogin()\r\n\r\n    const [input, setInput] = useState(\"\")\r\n\r\n    const handleClick = (e) =>{\r\n        setInput(e.target.value)\r\n        \r\n        if (e.key === 'Enter'){\r\n            handleSubmit()\r\n        }\r\n    }\r\n\r\n    const handleSubmit = async () => {\r\n\r\n\r\n        const req = {\r\n            type: 'get',\r\n            getType: 'user',\r\n            userID: input\r\n        }\r\n        axios.post('http://127.0.0.1:6969/api', req)\r\n        .then((res)=>{\r\n            const user = res.data\r\n            console.log(res, user);\r\n            if(user.navn){\r\n                updateLogin(user)\r\n                window.location.href = \"/\"\r\n                return\r\n            }\r\n            alert('error')\r\n        })\r\n    \r\n    }\r\n\r\n    const regButtonClick = () =>{\r\n        window.location.href=\"/registrer\"\r\n    }\r\n\r\n    return(\r\n        \r\n        <>\r\n            <h2>Logg inn elev</h2>\r\n            <input type=\"password\"autoFocus onKeyUp={handleClick} />\r\n\r\n            <div className=\"wrap-row\">\r\n            <button onClick={handleSubmit}><h4>Logg inn</h4></button>\r\n            <button onClick={regButtonClick} ><h4>Registrer</h4></button>\r\n            \r\n            </div>\r\n            \r\n        </>\r\n        \r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}