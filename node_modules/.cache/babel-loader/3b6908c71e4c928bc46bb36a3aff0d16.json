{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\teodo\\\\Documents\\\\GitHub\\\\utlansystemCha2\\\\src\\\\Components\\\\Innlevering.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useState } from 'react';\nimport Sucsess from './Sucsess';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Innlevering = () => {\n  _s();\n\n  const [sucsess, setSucsess] = useState(false);\n\n  const handleInput = e => {\n    let regex = /\\d+ZX$/;\n    let check = regex.test(e.target.value);\n\n    if (check) {\n      const req = {\n        type: 'get',\n        getType: 'utlaan',\n        _id: e.target.value\n      }; //get scanned item in utlånt db\n\n      axios.post('http://172.31.100.69:6969/api', req).then(res => {\n        if (res.data === 'not found') {\n          e.target.value = \"\";\n          alert('Ikke utlevert!');\n          return;\n        }\n\n        const data = res.data[0];\n        const req = {\n          type: 'get',\n          getType: 'user',\n          userID: data.user\n        };\n        axios.post('http://localhost:6969/api', req).then(res2 => {\n          const user = res2.data;\n          const utlant = user.utlant;\n          const nyUtlant = utlant.filter(obj => obj.bCode !== data._id);\n          const req = {\n            type: 'rmUtlan',\n            nyUtlant: nyUtlant,\n            bCode: data._id,\n            userID: data.user\n          };\n          axios.post('http://localhost:6969/api', req);\n          setSucsess(true);\n          setTimeout(() => {\n            setSucsess(false);\n          }, 2500);\n        });\n        e.target.value = \"\";\n      });\n    }\n  };\n\n  const back = () => {\n    window.history.back();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Innlevering\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), sucsess ? /*#__PURE__*/_jsxDEV(Sucsess, {\n      type: \"Innlevert\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 24\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(\"input\", {\n      autoFocus: true,\n      onKeyUp: handleInput,\n      type: \"text\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      id: \"red-gradient\",\n      onClick: back,\n      children: \"Tilbake\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Innlevering, \"eRp6Mzg5zeBkmp6G4NodYgkvO9Y=\");\n\n_c = Innlevering;\nexport default Innlevering;\n\nvar _c;\n\n$RefreshReg$(_c, \"Innlevering\");","map":{"version":3,"sources":["C:/Users/teodo/Documents/GitHub/utlansystemCha2/src/Components/Innlevering.js"],"names":["axios","React","useState","Sucsess","Innlevering","sucsess","setSucsess","handleInput","e","regex","check","test","target","value","req","type","getType","_id","post","then","res","data","alert","userID","user","res2","utlant","nyUtlant","filter","obj","bCode","setTimeout","back","window","history"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport React, { useState } from 'react'\r\nimport Sucsess from './Sucsess'\r\n\r\nconst Innlevering = () => {\r\n\r\n    const [sucsess, setSucsess] = useState(false)\r\n\r\n    const handleInput = (e) => {\r\n\r\n        let regex = /\\d+ZX$/\r\n        let check = regex.test(e.target.value)\r\n\r\n        if(check) {\r\n            const req = {\r\n                type: 'get',\r\n                getType: 'utlaan',\r\n                _id: e.target.value\r\n            }\r\n            //get scanned item in utlånt db\r\n            axios.post('http://172.31.100.69:6969/api', req)\r\n            .then(res =>{\r\n                \r\n\r\n                if (res.data === 'not found'){\r\n                    e.target.value = \"\"\r\n                    alert('Ikke utlevert!')\r\n                    return\r\n                }\r\n                \r\n                const data = res.data[0]\r\n                const req = {\r\n                    type: 'get',\r\n                    getType: 'user',\r\n                    userID: data.user\r\n                }\r\n\r\n                axios.post('http://localhost:6969/api', req)\r\n                .then(res2 =>{\r\n                    const user = res2.data\r\n                    \r\n                    const utlant = user.utlant\r\n                    const nyUtlant = utlant.filter(obj => obj.bCode !== data._id )\r\n                    \r\n                    const req = {\r\n                        type: 'rmUtlan',\r\n                        nyUtlant: nyUtlant,\r\n                        bCode: data._id,\r\n                        userID: data.user\r\n                    }\r\n                    \r\n                    axios.post('http://localhost:6969/api', req)\r\n                    setSucsess(true)\r\n                    setTimeout(()=>{\r\n                        setSucsess(false)\r\n                    }, 2500)\r\n\r\n                })\r\n\r\n                e.target.value = \"\"\r\n            })\r\n        }\r\n    }\r\n\r\n    const back = () =>{\r\n        window.history.back()\r\n    }\r\n\r\n    return (\r\n        <div className=\"card\">\r\n            <h1>Innlevering</h1>\r\n            {sucsess ? <Sucsess type=\"Innlevert\" /> : \"\"}\r\n            <input autoFocus onKeyUp={handleInput} type=\"text\" />\r\n            <button id=\"red-gradient\" onClick={back}>Tilbake</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Innlevering\r\n"]},"metadata":{},"sourceType":"module"}