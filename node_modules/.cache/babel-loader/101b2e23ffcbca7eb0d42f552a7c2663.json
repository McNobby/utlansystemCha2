{"ast":null,"code":"import _objectSpread from\"C:/Users/teodo/Documents/GitHub/utlansystemCha2/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/teodo/Documents/GitHub/utlansystemCha2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var LoginContext=/*#__PURE__*/React.createContext();var UpdateLoginContext=/*#__PURE__*/React.createContext();export function useLogin(){return useContext(LoginContext);}export function useUpdateLogin(){return useContext(UpdateLoginContext);}export function LoginProvider(_ref){var children=_ref.children;var elevID=localStorage.getItem('elevID');var elevNavn=localStorage.getItem('elevNavn');var teacher=localStorage.getItem('teacher');var plassering=localStorage.getItem('plassering');var utlant=localStorage.getItem('utlant');var login={navn:elevNavn,id:elevID,teacher:teacher,plassering:plassering,utlant:utlant};console.log(login,'start');var _useState=useState(login),_useState2=_slicedToArray(_useState,2),loginState=_useState2[0],setLoginState=_useState2[1];//expecting {name: \"\", id:\"\"}\nfunction updateLogin(obj){setLoginState(obj);if(obj.navn){localStorage.setItem('elevID',obj._id);localStorage.setItem('elevNavn',obj.navn);localStorage.setItem('utlant',JSON.stringify(obj.utlant));var _plassering=localStorage.getItem('plassering');var _teacher=localStorage.getItem('teacher');setLoginState(_objectSpread(_objectSpread({},obj),{},{teacher:_teacher,plassering:_plassering}));return;}if(obj.teacher){localStorage.setItem('teacher',obj.teacher);var _plassering2=localStorage.getItem('plassering');console.log(loginState);setLoginState(_objectSpread(_objectSpread({},obj),{},{plassering:_plassering2}));return;}if(obj.plassering){localStorage.setItem('plassering',obj.plassering);}}return/*#__PURE__*/_jsx(LoginContext.Provider,{value:loginState,children:/*#__PURE__*/_jsx(UpdateLoginContext.Provider,{value:updateLogin,children:children})});}","map":{"version":3,"sources":["C:/Users/teodo/Documents/GitHub/utlansystemCha2/src/loginContext.js"],"names":["React","useContext","useState","LoginContext","createContext","UpdateLoginContext","useLogin","useUpdateLogin","LoginProvider","children","elevID","localStorage","getItem","elevNavn","teacher","plassering","utlant","login","navn","id","console","log","loginState","setLoginState","updateLogin","obj","setItem","_id","JSON","stringify"],"mappings":"mQAAA,MAAOA,CAAAA,KAAP,EAAeC,UAAf,CAA2BC,QAA3B,KAA0C,OAA1C,C,2CAEA,GAAMC,CAAAA,YAAY,cAAGH,KAAK,CAACI,aAAN,EAArB,CACA,GAAMC,CAAAA,kBAAkB,cAAGL,KAAK,CAACI,aAAN,EAA3B,CAEA,MAAO,SAASE,CAAAA,QAAT,EAAoB,CACvB,MAAOL,CAAAA,UAAU,CAACE,YAAD,CAAjB,CAEH,CAED,MAAO,SAASI,CAAAA,cAAT,EAA0B,CAC7B,MAAON,CAAAA,UAAU,CAACI,kBAAD,CAAjB,CACH,CAED,MAAO,SAASG,CAAAA,aAAT,MAAqC,IAAZC,CAAAA,QAAY,MAAZA,QAAY,CACxC,GAAMC,CAAAA,MAAM,CAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAf,CACA,GAAMC,CAAAA,QAAQ,CAAGF,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAjB,CACA,GAAME,CAAAA,OAAO,CAAGH,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAhB,CACA,GAAMG,CAAAA,UAAU,CAAGJ,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAnB,CACA,GAAMI,CAAAA,MAAM,CAAGL,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAf,CAEA,GAAMK,CAAAA,KAAK,CAAG,CAACC,IAAI,CAAEL,QAAP,CAAiBM,EAAE,CAAET,MAArB,CAA6BI,OAAO,CAAEA,OAAtC,CAA+CC,UAAU,CAAEA,UAA3D,CAAuEC,MAAM,CAAEA,MAA/E,CAAd,CACAI,OAAO,CAACC,GAAR,CAAYJ,KAAZ,CAAmB,OAAnB,EACA,cAAoCf,QAAQ,CAACe,KAAD,CAA5C,wCAAOK,UAAP,eAAmBC,aAAnB,eAAoD;AAKpD,QAASC,CAAAA,WAAT,CAAqBC,GAArB,CAA0B,CACtBF,aAAa,CAACE,GAAD,CAAb,CAEA,GAAIA,GAAG,CAACP,IAAR,CAAa,CACTP,YAAY,CAACe,OAAb,CAAqB,QAArB,CAA+BD,GAAG,CAACE,GAAnC,EACAhB,YAAY,CAACe,OAAb,CAAqB,UAArB,CAAiCD,GAAG,CAACP,IAArC,EACAP,YAAY,CAACe,OAAb,CAAqB,QAArB,CAA+BE,IAAI,CAACC,SAAL,CAAeJ,GAAG,CAACT,MAAnB,CAA/B,EACA,GAAMD,CAAAA,WAAU,CAAGJ,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAnB,CACA,GAAME,CAAAA,QAAO,CAAGH,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAhB,CAEAW,aAAa,gCAAKE,GAAL,MAAUX,OAAO,CAAEA,QAAnB,CAA4BC,UAAU,CAAEA,WAAxC,GAAb,CACA,OACH,CACD,GAAIU,GAAG,CAACX,OAAR,CAAgB,CACZH,YAAY,CAACe,OAAb,CAAqB,SAArB,CAAgCD,GAAG,CAACX,OAApC,EACA,GAAMC,CAAAA,YAAU,CAAGJ,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAnB,CAGAQ,OAAO,CAACC,GAAR,CAAYC,UAAZ,EACAC,aAAa,gCAAKE,GAAL,MAAUV,UAAU,CAAEA,YAAtB,GAAb,CACA,OACH,CACD,GAAGU,GAAG,CAACV,UAAP,CAAkB,CACdJ,YAAY,CAACe,OAAb,CAAqB,YAArB,CAAmCD,GAAG,CAACV,UAAvC,EACH,CAEJ,CAED,mBACI,KAAC,YAAD,CAAc,QAAd,EAAuB,KAAK,CAAEO,UAA9B,uBACI,KAAC,kBAAD,CAAoB,QAApB,EAA6B,KAAK,CAAEE,WAApC,UACKf,QADL,EADJ,EADJ,CAOH","sourcesContent":["import React, {useContext, useState} from 'react'\r\n\r\nconst LoginContext = React.createContext()\r\nconst UpdateLoginContext = React.createContext()\r\n\r\nexport function useLogin() {\r\n    return useContext(LoginContext)\r\n    \r\n}\r\n\r\nexport function useUpdateLogin() {\r\n    return useContext(UpdateLoginContext)\r\n}\r\n\r\nexport function LoginProvider({ children }) {\r\n    const elevID = localStorage.getItem('elevID')\r\n    const elevNavn = localStorage.getItem('elevNavn')\r\n    const teacher = localStorage.getItem('teacher')\r\n    const plassering = localStorage.getItem('plassering')\r\n    const utlant = localStorage.getItem('utlant')\r\n\r\n    const login = {navn: elevNavn, id: elevID, teacher: teacher, plassering: plassering, utlant: utlant}\r\n    console.log(login, 'start');\r\n    const [loginState, setLoginState] = useState(login) //expecting {name: \"\", id:\"\"}\r\n    \r\n\r\n\r\n\r\n    function updateLogin(obj) {\r\n        setLoginState(obj)\r\n\r\n        if (obj.navn){\r\n            localStorage.setItem('elevID', obj._id)\r\n            localStorage.setItem('elevNavn', obj.navn)\r\n            localStorage.setItem('utlant', JSON.stringify(obj.utlant))\r\n            const plassering = localStorage.getItem('plassering')\r\n            const teacher = localStorage.getItem('teacher')\r\n\r\n            setLoginState({...obj, teacher: teacher, plassering: plassering,})\r\n            return\r\n        }\r\n        if (obj.teacher){\r\n            localStorage.setItem('teacher', obj.teacher)\r\n            const plassering = localStorage.getItem('plassering')\r\n            \r\n\r\n            console.log(loginState);\r\n            setLoginState({...obj, plassering: plassering})\r\n            return\r\n        }\r\n        if(obj.plassering){\r\n            localStorage.setItem('plassering', obj.plassering)\r\n        }\r\n\r\n    }\r\n\r\n    return(\r\n        <LoginContext.Provider value={loginState}>\r\n            <UpdateLoginContext.Provider value={updateLogin}>\r\n                {children}\r\n            </UpdateLoginContext.Provider>\r\n        </LoginContext.Provider>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}