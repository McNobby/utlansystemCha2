{"ast":null,"code":"import _slicedToArray from\"C:/Users/teodo/Documents/GitHub/utlansystemCha2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import React,{useState}from'react';import Sucsess from'./Sucsess';import{apiAdress}from'./config.json';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Innlevering=function Innlevering(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sucsess=_useState2[0],setSucsess=_useState2[1];var handleInput=function handleInput(e){var regex=/\\d+ZX$/;var check=regex.test(e.target.value);if(check){var req={type:'get',getType:'utlaan',_id:e.target.value};//get scanned item in utlånt db\naxios.post(apiAdress,req).then(function(res){if(res.data==='not found'){e.target.value=\"\";alert('Ikke utlevert!');return;}var data=res.data[0];var req={type:'get',getType:'user',userID:data.user};axios.post(apiAdress,req).then(function(res2){var user=res2.data;var utlant=user.utlant;var nyUtlant=utlant.filter(function(obj){return obj.bCode!==data._id;});var req={type:'rmUtlan',nyUtlant:nyUtlant,bCode:data._id,userID:data.user};axios.post(apiAdress,req);setSucsess(true);setTimeout(function(){setSucsess(false);},2500);});e.target.value=\"\";});}};var back=function back(){window.history.back();};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Innlevering\"}),sucsess?/*#__PURE__*/_jsx(Sucsess,{type:\"Innlevert\"}):\"\",/*#__PURE__*/_jsx(\"input\",{autoFocus:true,onKeyUp:handleInput,type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{id:\"red-gradient\",onClick:back,children:\"Tilbake\"})]});};export default Innlevering;","map":{"version":3,"sources":["C:/Users/teodo/Documents/GitHub/utlansystemCha2/src/Components/Innlevering.js"],"names":["axios","React","useState","Sucsess","apiAdress","Innlevering","sucsess","setSucsess","handleInput","e","regex","check","test","target","value","req","type","getType","_id","post","then","res","data","alert","userID","user","res2","utlant","nyUtlant","filter","obj","bCode","setTimeout","back","window","history"],"mappings":"kIAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,OAAQC,SAAR,KAAwB,eAAxB,C,wFAGA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CAEtB,cAA8BH,QAAQ,CAAC,KAAD,CAAtC,wCAAOI,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,CAAD,CAAO,CAEvB,GAAIC,CAAAA,KAAK,CAAG,QAAZ,CACA,GAAIC,CAAAA,KAAK,CAAGD,KAAK,CAACE,IAAN,CAAWH,CAAC,CAACI,MAAF,CAASC,KAApB,CAAZ,CAEA,GAAGH,KAAH,CAAU,CACN,GAAMI,CAAAA,GAAG,CAAG,CACRC,IAAI,CAAE,KADE,CAERC,OAAO,CAAE,QAFD,CAGRC,GAAG,CAAET,CAAC,CAACI,MAAF,CAASC,KAHN,CAAZ,CAKA;AACAd,KAAK,CAACmB,IAAN,CAAWf,SAAX,CAAsBW,GAAtB,EACCK,IADD,CACM,SAAAC,GAAG,CAAG,CAGR,GAAIA,GAAG,CAACC,IAAJ,GAAa,WAAjB,CAA6B,CACzBb,CAAC,CAACI,MAAF,CAASC,KAAT,CAAiB,EAAjB,CACAS,KAAK,CAAC,gBAAD,CAAL,CACA,OACH,CAED,GAAMD,CAAAA,IAAI,CAAGD,GAAG,CAACC,IAAJ,CAAS,CAAT,CAAb,CACA,GAAMP,CAAAA,GAAG,CAAG,CACRC,IAAI,CAAE,KADE,CAERC,OAAO,CAAE,MAFD,CAGRO,MAAM,CAAEF,IAAI,CAACG,IAHL,CAAZ,CAMAzB,KAAK,CAACmB,IAAN,CAAWf,SAAX,CAAsBW,GAAtB,EACCK,IADD,CACM,SAAAM,IAAI,CAAG,CACT,GAAMD,CAAAA,IAAI,CAAGC,IAAI,CAACJ,IAAlB,CAEA,GAAMK,CAAAA,MAAM,CAAGF,IAAI,CAACE,MAApB,CACA,GAAMC,CAAAA,QAAQ,CAAGD,MAAM,CAACE,MAAP,CAAc,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,KAAJ,GAAcT,IAAI,CAACJ,GAAvB,EAAjB,CAAjB,CAEA,GAAMH,CAAAA,GAAG,CAAG,CACRC,IAAI,CAAE,SADE,CAERY,QAAQ,CAAEA,QAFF,CAGRG,KAAK,CAAET,IAAI,CAACJ,GAHJ,CAIRM,MAAM,CAAEF,IAAI,CAACG,IAJL,CAAZ,CAOAzB,KAAK,CAACmB,IAAN,CAAWf,SAAX,CAAsBW,GAAtB,EACAR,UAAU,CAAC,IAAD,CAAV,CACAyB,UAAU,CAAC,UAAI,CACXzB,UAAU,CAAC,KAAD,CAAV,CACH,CAFS,CAEP,IAFO,CAAV,CAIH,CApBD,EAsBAE,CAAC,CAACI,MAAF,CAASC,KAAT,CAAiB,EAAjB,CACH,CAxCD,EAyCH,CACJ,CAtDD,CAwDA,GAAMmB,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAK,CACdC,MAAM,CAACC,OAAP,CAAeF,IAAf,GACH,CAFD,CAIA,mBACI,aAAK,SAAS,CAAC,MAAf,wBACI,mCADJ,CAEK3B,OAAO,cAAG,KAAC,OAAD,EAAS,IAAI,CAAC,WAAd,EAAH,CAAkC,EAF9C,cAGI,cAAO,SAAS,KAAhB,CAAiB,OAAO,CAAEE,WAA1B,CAAuC,IAAI,CAAC,MAA5C,EAHJ,cAII,eAAQ,EAAE,CAAC,cAAX,CAA0B,OAAO,CAAEyB,IAAnC,qBAJJ,GADJ,CAQH,CAxED,CA0EA,cAAe5B,CAAAA,WAAf","sourcesContent":["import axios from 'axios'\r\nimport React, { useState } from 'react'\r\nimport Sucsess from './Sucsess'\r\nimport {apiAdress} from './config.json'\r\n\r\n\r\nconst Innlevering = () => {\r\n\r\n    const [sucsess, setSucsess] = useState(false)\r\n\r\n    const handleInput = (e) => {\r\n\r\n        let regex = /\\d+ZX$/\r\n        let check = regex.test(e.target.value)\r\n\r\n        if(check) {\r\n            const req = {\r\n                type: 'get',\r\n                getType: 'utlaan',\r\n                _id: e.target.value\r\n            }\r\n            //get scanned item in utlånt db\r\n            axios.post(apiAdress, req)\r\n            .then(res =>{\r\n                \r\n\r\n                if (res.data === 'not found'){\r\n                    e.target.value = \"\"\r\n                    alert('Ikke utlevert!')\r\n                    return\r\n                }\r\n                \r\n                const data = res.data[0]\r\n                const req = {\r\n                    type: 'get',\r\n                    getType: 'user',\r\n                    userID: data.user\r\n                }\r\n\r\n                axios.post(apiAdress, req)\r\n                .then(res2 =>{\r\n                    const user = res2.data\r\n                    \r\n                    const utlant = user.utlant\r\n                    const nyUtlant = utlant.filter(obj => obj.bCode !== data._id )\r\n                    \r\n                    const req = {\r\n                        type: 'rmUtlan',\r\n                        nyUtlant: nyUtlant,\r\n                        bCode: data._id,\r\n                        userID: data.user\r\n                    }\r\n                    \r\n                    axios.post(apiAdress, req)\r\n                    setSucsess(true)\r\n                    setTimeout(()=>{\r\n                        setSucsess(false)\r\n                    }, 2500)\r\n\r\n                })\r\n\r\n                e.target.value = \"\"\r\n            })\r\n        }\r\n    }\r\n\r\n    const back = () =>{\r\n        window.history.back()\r\n    }\r\n\r\n    return (\r\n        <div className=\"card\">\r\n            <h1>Innlevering</h1>\r\n            {sucsess ? <Sucsess type=\"Innlevert\" /> : \"\"}\r\n            <input autoFocus onKeyUp={handleInput} type=\"text\" />\r\n            <button id=\"red-gradient\" onClick={back}>Tilbake</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Innlevering\r\n"]},"metadata":{},"sourceType":"module"}